
<!doctype html>
<html lang="uz" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ðŸŸ¢ Guides, Examples, Tutorials">
      
      
        <meta name="author" content="Hoosnick">
      
      
        <link rel="canonical" href="https://hoosnick.github.io/rest-api-framework-book/12_auth/">
      
      
        <link rel="prev" href="../11_deploy/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.5">
    
    
      
        <title>Mavzu 11: Autentifikatsiya va avtorizatsiya - REST API FRAMEWORK</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6a10b989.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mavzu-11-autentifikatsiya-va-avtorizatsiya" class="md-skip">
          Tarkibga o'tish
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Sarlavha">
    <a href=".." title="REST API FRAMEWORK" class="md-header__button md-logo" aria-label="REST API FRAMEWORK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2m0 4H5V9h2m7-2h-4v10h2v-4h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2m0 4h-2V9h2m6 0v6h1v2h-4v-2h1V9h-1V7h4v2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            REST API FRAMEWORK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mavzu 11: Autentifikatsiya va avtorizatsiya
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Qidirish" placeholder="Qidirish" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Qidirish">
        
        <button type="reset" class="md-search__icon md-icon" title="Tozalash" aria-label="Tozalash" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Qidiruv ishga tushirilmoqda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hoosnick/rest-api-framework-book" title="Repozitoriyga o'tish" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hoosnick/rest-api-framework-book
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigatsiya" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="REST API FRAMEWORK" class="md-nav__button md-logo" aria-label="REST API FRAMEWORK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2m0 4H5V9h2m7-2h-4v10h2v-4h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2m0 4h-2V9h2m6 0v6h1v2h-4v-2h1V9h-1V7h4v2Z"/></svg>

    </a>
    REST API FRAMEWORK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hoosnick/rest-api-framework-book" title="Repozitoriyga o'tish" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hoosnick/rest-api-framework-book
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django REST API Framework
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../02_work_with_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 2: Modellar bilan ishlash
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../03_queryset_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 3: QuerySet. Filtr va shartlar bilan ishlash
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../04_queryset_methods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 4: QuerySet qaytaradigan metodlar
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../05_queryset_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 5: QuerySet. Mantiqiy shartlar va agregat funksiyalar
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../06_queryset_outro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 6: QuerySet. QuerySet qaytarmaydigan metodlar
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../07_api_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 1: API va REST API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../08_api_outro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 7: API va REST API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../09_views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 8: Class View
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../10_serializer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 9: Serializer. Pagination. Filtering. Security
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../11_deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mavzu 10: Deploy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Mavzu 11: Autentifikatsiya va avtorizatsiya
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Mavzu 11: Autentifikatsiya va avtorizatsiya
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Mundarija">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mundarija
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reja" class="md-nav__link">
    Reja:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-bilim" class="md-nav__link">
    1. Bilim
  </a>
  
    <nav class="md-nav" aria-label="1. Bilim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-terminlar" class="md-nav__link">
    1.1 Terminlar
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-amaliyot-oqituvchi" class="md-nav__link">
    2. Amaliyot. O'qituvchi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-amaliyot-oquvchi" class="md-nav__link">
    3. Amaliyot. O'quvchi
  </a>
  
    <nav class="md-nav" aria-label="3. Amaliyot. O'quvchi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-tushunchalar" class="md-nav__link">
    2.1 Tushunchalar
  </a>
  
    <nav class="md-nav" aria-label="2.1 Tushunchalar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-identifikatsiya" class="md-nav__link">
    2.1.1 Identifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-autentifikatsiya" class="md-nav__link">
    2.1.2 Autentifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-avtorizatsiya" class="md-nav__link">
    2.1.3 Avtorizatsiya
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-oddiy-autentifikatsiya" class="md-nav__link">
    2.2 Oddiy autentifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-tokenli-autentifikatsiya" class="md-nav__link">
    2.3 Tokenli autentifikatsiya
  </a>
  
    <nav class="md-nav" aria-label="2.3 Tokenli autentifikatsiya">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    login
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-login-logout-register" class="md-nav__link">
    2.4 Login, logout, register
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Mundarija">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mundarija
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reja" class="md-nav__link">
    Reja:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-bilim" class="md-nav__link">
    1. Bilim
  </a>
  
    <nav class="md-nav" aria-label="1. Bilim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-terminlar" class="md-nav__link">
    1.1 Terminlar
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-amaliyot-oqituvchi" class="md-nav__link">
    2. Amaliyot. O'qituvchi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-amaliyot-oquvchi" class="md-nav__link">
    3. Amaliyot. O'quvchi
  </a>
  
    <nav class="md-nav" aria-label="3. Amaliyot. O'quvchi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-tushunchalar" class="md-nav__link">
    2.1 Tushunchalar
  </a>
  
    <nav class="md-nav" aria-label="2.1 Tushunchalar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-identifikatsiya" class="md-nav__link">
    2.1.1 Identifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-autentifikatsiya" class="md-nav__link">
    2.1.2 Autentifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-avtorizatsiya" class="md-nav__link">
    2.1.3 Avtorizatsiya
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-oddiy-autentifikatsiya" class="md-nav__link">
    2.2 Oddiy autentifikatsiya
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-tokenli-autentifikatsiya" class="md-nav__link">
    2.3 Tokenli autentifikatsiya
  </a>
  
    <nav class="md-nav" aria-label="2.3 Tokenli autentifikatsiya">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    login
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-login-logout-register" class="md-nav__link">
    2.4 Login, logout, register
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="mavzu-11-autentifikatsiya-va-avtorizatsiya">Mavzu 11: Autentifikatsiya va avtorizatsiya<a class="headerlink" href="#mavzu-11-autentifikatsiya-va-avtorizatsiya" title="Permanent link">&para;</a></h1>
<h2 id="reja">Reja:<a class="headerlink" href="#reja" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-bilim">Bilim</a></li>
<li><a href="#11-terminlar">1.1 Terminlar</a></li>
<li><a href="#12-oqish-uchun-materiallar">1.2 O'qish uchun materiallar</a></li>
<li><a href="#2-amaliyot-oqituvchi">Amaliyot. O'qituvchi</a></li>
<li><a href="#3-amaliyot-oquvchi">Amaliyot. O'quvchi</a></li>
</ol>
<h2 id="1-bilim">1. Bilim<a class="headerlink" href="#1-bilim" title="Permanent link">&para;</a></h2>
<h3 id="11-terminlar">1.1 Terminlar<a class="headerlink" href="#11-terminlar" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>
</code></pre></div>
<h2 id="2-amaliyot-oqituvchi">2. Amaliyot. O'qituvchi<a class="headerlink" href="#2-amaliyot-oqituvchi" title="Permanent link">&para;</a></h2>
<p><strong>Reja:</strong></p>
<ul>
<li>[2.1 Tushunchalar]</li>
<li>[2.1.1 Identifikatsiya]</li>
<li>[2.1.2 Autentifikatsiya]</li>
<li>[2.1.3 Avtorizatsiya]</li>
<li>[2.2 Oddiy autentifikatsiya]</li>
<li>
<p>[2.3 Tokenli autentifikatsiya]</p>
</li>
<li>
<p>[2.4 Login, logout, register]</p>
</li>
</ul>
<h2 id="3-amaliyot-oquvchi">3. Amaliyot. O'quvchi<a class="headerlink" href="#3-amaliyot-oquvchi" title="Permanent link">&para;</a></h2>
<h3 id="21-tushunchalar">2.1 Tushunchalar<a class="headerlink" href="#21-tushunchalar" title="Permanent link">&para;</a></h3>
<p><a href="https://www.youtube.com/watch?v=_eLq8jO1T9o&amp;list=PLZ67NWgKA8g7b-o4w5bm3B4fngZ2ug959&amp;index=50">Video</a></p>
<h4 id="211-identifikatsiya">2.1.1 Identifikatsiya<a class="headerlink" href="#211-identifikatsiya" title="Permanent link">&para;</a></h4>
<p><b>Identifikatsiya</b> - shaxsingizni tasdiqlovchi ma'lumotlarni taqdim qilish jarayoni. Masalan ism, familiya, login, parol, ERI, barmoq izi, ko'z, yuz shakli, ID karta va hak</p>
<p><img alt="" src="../images/auth/img.png" /></p>
<h4 id="212-autentifikatsiya">2.1.2 Autentifikatsiya<a class="headerlink" href="#212-autentifikatsiya" title="Permanent link">&para;</a></h4>
<p><b>Autentifikatsiya</b> - shaxsingizni tasdiqlovchi ma'lumotlarni haqiqiylikka tekshirish jarayoni</p>
<p><img alt="" src="../images/auth/img_1.png" /></p>
<h4 id="213-avtorizatsiya">2.1.3 Avtorizatsiya<a class="headerlink" href="#213-avtorizatsiya" title="Permanent link">&para;</a></h4>
<p><b>Avtorizatsiya</b> - foydalanuvchi roliga qarab tegishli sahifalardan tegishli amallar bilan foydalnishga ruhsat berish jarayonidir
<br>Tegishli sahifalarga mahsulotlar sahifasi, admin panel, login sahifasi, buyurtma berish sahifalari kiradi
<br>
<br>
Tegishli amallarga kiritish, o'qish, o'chirish, o'zgartirish amallari kiradi</p>
<p><img alt="" src="../images/auth/img_2.png" /></p>
<p>Oddiy qilib tushuntirganda siz biron tashkilotga kirmoqchisiz. Jarayon tahminan mana bunday bo'ladi:</p>
<p><img alt="" src="../images/auth/img_3.png" /></p>
<h3 id="22-oddiy-autentifikatsiya">2.2 Oddiy autentifikatsiya<a class="headerlink" href="#22-oddiy-autentifikatsiya" title="Permanent link">&para;</a></h3>
<p><b>Qadam - 1.</b></p>
<p>Authentifikiatsiyani API hamma turlarida qanday ishlatilishini tushunib olish uchun avval bitta vazifani bajaradigan 5 xil ko'rinishdagi API yasaymiz, hammasi loyihalar ro'yxatini qaytaradi.</p>
<p><b>projects/views.py</b></p>

<div class="highlight"><pre><span></span><code><span class="c1"># api_view</span>
<span class="kn">from</span> <span class="nn">.serializers</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">mixins</span><span class="p">,</span> <span class="n">generics</span>
<span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">api_view</span><span class="p">,</span> <span class="n">permission_classes</span>
<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">rest_framework.views</span> <span class="kn">import</span> <span class="n">APIView</span>

<span class="c1"># ...</span>

<span class="nd">@api_view</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_projects</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
    <span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-vote_count&#39;</span><span class="p">)</span>
    <span class="n">serializer</span> <span class="o">=</span> <span class="n">ProjectSerializer</span><span class="p">(</span><span class="n">projects</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>


<span class="c1"># APIVIEW</span>
<span class="k">class</span> <span class="nc">ProjectAPIView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">ProjectSerializer</span><span class="p">(</span><span class="n">projects</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>


<span class="c1"># Mixin</span>
<span class="k">class</span> <span class="nc">ProjectMixin</span><span class="p">(</span><span class="n">mixins</span><span class="o">.</span><span class="n">ListModelMixin</span><span class="p">,</span> <span class="n">generics</span><span class="o">.</span><span class="n">GenericAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>


<span class="c1"># Generic view</span>
<span class="k">class</span> <span class="nc">ProjectGeneric</span><span class="p">(</span><span class="n">generics</span><span class="o">.</span><span class="n">ListCreateAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>


<span class="c1"># ViewSet</span>
<span class="k">class</span> <span class="nc">ProjectViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>
</code></pre></div>
<p>Marshrutini ko'rsatamiz</p>
<p><b>projects/urls.py</b></p>

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">rest_framework.routers</span> <span class="kn">import</span> <span class="n">DefaultRouter</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">DefaultRouter</span><span class="p">()</span>
<span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;project_viewset/&#39;</span><span class="p">,</span> <span class="n">ProjectViewSet</span><span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;project_function/&#39;</span><span class="p">,</span> <span class="n">get_projects</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;project_apiview/&#39;</span><span class="p">,</span> <span class="n">ProjectAPIView</span><span class="o">.</span><span class="n">as_view</span><span class="p">()),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;project_mixin/&#39;</span><span class="p">,</span> <span class="n">ProjectMixin</span><span class="o">.</span><span class="n">as_view</span><span class="p">()),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;project_generic/&#39;</span><span class="p">,</span> <span class="n">ProjectGeneric</span><span class="o">.</span><span class="n">as_view</span><span class="p">()),</span>
<span class="p">]</span>
</code></pre></div>
<p>Hammasini Postmandan ishga tushiramiz</p>
<p><img alt="" src="../images/auth/img_4.png" /></p>
<p>Endi bu APIni faqat ro'yxatdan o'tganlar (autentifikatsiyadan o'tgan) uchun chegaralaymiz
<br>Autentifikatsiyani bir necha hillari bor. Eng oddiysi parol va loginga asoslanadi. Hozir shuni ko'rib o'tamiz.</p>
<p><b>Qadam - 2.</b></p>
<p>Autentifikatsiya turini global o'rnatish uchun setting.py fayliga quyidagi kodlarni yozamiz:</p>
<div class="highlight"><pre><span></span><code><span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Endi API lar uchun sozlashlarni amalga oshiramiz</p>
<div class="highlight"><pre><span></span><code><span class="c1"># api_view</span>
<span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">api_view</span><span class="p">,</span> <span class="n">permission_classes</span>
<span class="kn">from</span> <span class="nn">rest_framework.permissions</span> <span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@api_view</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@permission_classes</span><span class="p">([</span><span class="n">IsAuthenticated</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_projects</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
    <span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-vote_count&#39;</span><span class="p">)</span>
    <span class="n">serializer</span> <span class="o">=</span> <span class="n">ProjectSerializer</span><span class="p">(</span><span class="n">projects</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>Izoh:</p>
<ul>
<li>@permission_classes([IsAuthenticated]) - agar autentifikatsiyadan o'tgan bo'lsagina bu APIdan faydalanishga ruxsat bor degani</li>
</ul>
<p>Endi Postmanda sinab ko'ramiz</p>
<p>Autentifikatsiya kerakli ma'lumotlar taqdim qilinmagan degan habar chiqdi. Endi bu APIdan foydalanish uchun parol va login bilan foydalanishimiz kerak bo'ladi</p>
<p><img alt="" src="../images/auth/img_6.png" /></p>
<p>Qolgan 4 ta APIlarda ham parol login bilan foydalanishni talab qilmoqchi bo'lsak class ga permission_classes = [IsAuthenticated] kodini yozamiz:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">.serializers</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">mixins</span><span class="p">,</span> <span class="n">generics</span>
<span class="kn">from</span> <span class="nn">rest_framework.permissions</span> <span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">api_view</span><span class="p">,</span> <span class="n">permission_classes</span>
<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">rest_framework.views</span> <span class="kn">import</span> <span class="n">APIView</span>

<span class="c1"># ...</span>

<span class="c1"># APIVIEW</span>
<span class="k">class</span> <span class="nc">ProjectAPIView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">ProjectSerializer</span><span class="p">(</span><span class="n">projects</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>


<span class="c1"># Mixin</span>
<span class="k">class</span> <span class="nc">ProjectMixin</span><span class="p">(</span><span class="n">mixins</span><span class="o">.</span><span class="n">ListModelMixin</span><span class="p">,</span> <span class="n">generics</span><span class="o">.</span><span class="n">GenericAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>


<span class="c1"># Generic view</span>
<span class="k">class</span> <span class="nc">ProjectGeneric</span><span class="p">(</span><span class="n">generics</span><span class="o">.</span><span class="n">ListCreateAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>


<span class="c1"># ViewSet</span>
<span class="k">class</span> <span class="nc">ProjectViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
</code></pre></div>
<p><img alt="" src="../images/auth/img_7.png" /></p>
<p>Parol loginlarni taqdim qilamiz:</p>
<p><img alt="" src="../images/auth/img_8.png" /></p>
<h3 id="23-tokenli-autentifikatsiya">2.3 Tokenli autentifikatsiya<a class="headerlink" href="#23-tokenli-autentifikatsiya" title="Permanent link">&para;</a></h3>
<p>Hozir Simple JWT nomli kutubhonani ko'rib o'tamiz.
<br>
JWT - JSON Web Token. DRF uchun mo'ljallangan authentifikatsiya kutubhonasi
<br>
<a href="https://django-rest-framework-simplejwt.readthedocs.io/en/latest/">JWT haqida hujjat</a>
<br>
Endi Autentifikatsiyani ikkinchi turii bo'lgan Token bilan tanishamiz. Bu yerda login va parol o'rnida token ishlatiladi. Bu oldingisiga nisbatan havfsiz hisoblanadi, chunkki token o'zgaritirb turish mumkin, va parol login ochiq bo'lmaydi.
<br></p>
<p><b>Qadam-1</b></p>

<p>Buning uchun avval quyidagi buyruq bilan kutubhonani o'rnatib olamiz:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; pip install djangorestframework-simplejwt
</code></pre></div>
<p><b>Qadam-2</b></p>

<p>Ruxsat berish (permission) va autentifikatsiya (authentification) turlarini ko'rsatish. Oddiy autentifikatsiyani global qilib o'rnatgandik, keling bunisini tegishli klassga beramiz. Masalan ViewSet klasiga beramiz:</p>
<p><b>projects/views/py</b></p>

<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">rest_framework_simplejwt.authentication</span> <span class="kn">import</span> <span class="n">JWTAuthentication</span>

<span class="c1"># ...</span>

<span class="c1"># ViewSet</span>
<span class="k">class</span> <span class="nc">ProjectViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProjectSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
    <span class="n">authentication_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">JWTAuthentication</span><span class="p">]</span>
</code></pre></div>
<p>Endi Postmandan parol login bersak ham ishlamaydi</p>
<p><img alt="" src="../images/auth/img_9.png" /></p>
<p>Sababi endi autentifikatsiya sifatida token bilan berish kerak</p>
<p><img alt="" src="../images/auth/img_10.png" /></p>
<p>Tokenni olish uchun bir marta parol login taqdim qilinadi, keyin esa autentifikatsiya uchun faqat token ishlatiladi. Token orqali server foydalanuvchini tanib oladi. Endi token olish jarayonini ko'ramiz</p>
<h4 id="login">login<a class="headerlink" href="#login" title="Permanent link">&para;</a></h4>
<p><b>urls.py</b></p>

<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">rest_framework_simplejwt.views</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TokenObtainPairView</span><span class="p">,</span>
    <span class="n">TokenRefreshView</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># ...</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/token/&#39;</span><span class="p">,</span> <span class="n">TokenObtainPairView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;token_obtain_pair&#39;</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/token/refresh/&#39;</span><span class="p">,</span> <span class="n">TokenRefreshView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;token_refresh&#39;</span><span class="p">),</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</code></pre></div>
<p>JWT sahifasida settings menyusiga kirib sozlamalarni ko'chirib olamiz, so'ng ba'zilarini o'zimiga moslashtirib olamiz:</p>
<p><b>settings.py</b></p>

<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>

<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;rest_framework_simplejwt&#39;</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="c1"># ...</span>

<span class="n">SIMPLE_JWT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ACCESS_TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
    <span class="s1">&#39;REFRESH_TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
    <span class="s1">&#39;ROTATE_REFRESH_TOKENS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;BLACKLIST_AFTER_ROTATION&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;UPDATE_LAST_LOGIN&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>

    <span class="s1">&#39;ALGORITHM&#39;</span><span class="p">:</span> <span class="s1">&#39;HS256&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SIGNING_KEY&#39;</span><span class="p">:</span> <span class="n">SECRET_KEY</span><span class="p">,</span>
    <span class="s1">&#39;VERIFYING_KEY&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;AUDIENCE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;ISSUER&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;JWK_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;LEEWAY&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

    <span class="s1">&#39;AUTH_HEADER_TYPES&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Bearer&#39;</span><span class="p">,),</span>
    <span class="s1">&#39;AUTH_HEADER_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER_ID_FIELD&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER_ID_CLAIM&#39;</span><span class="p">:</span> <span class="s1">&#39;user_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER_AUTHENTICATION_RULE&#39;</span><span class="p">:</span> <span class="s1">&#39;rest_framework_simplejwt.authentication.default_user_authentication_rule&#39;</span><span class="p">,</span>

    <span class="s1">&#39;AUTH_TOKEN_CLASSES&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;rest_framework_simplejwt.tokens.AccessToken&#39;</span><span class="p">,),</span>
    <span class="s1">&#39;TOKEN_TYPE_CLAIM&#39;</span><span class="p">:</span> <span class="s1">&#39;token_type&#39;</span><span class="p">,</span>
    <span class="s1">&#39;TOKEN_USER_CLASS&#39;</span><span class="p">:</span> <span class="s1">&#39;rest_framework_simplejwt.models.TokenUser&#39;</span><span class="p">,</span>

    <span class="s1">&#39;JTI_CLAIM&#39;</span><span class="p">:</span> <span class="s1">&#39;jti&#39;</span><span class="p">,</span>

    <span class="s1">&#39;SLIDING_TOKEN_REFRESH_EXP_CLAIM&#39;</span><span class="p">:</span> <span class="s1">&#39;refresh_exp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SLIDING_TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
    <span class="s1">&#39;SLIDING_TOKEN_REFRESH_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="p">}</span>
</code></pre></div>
<p>Izoh:</p>
<ul>
<li>ACCESS_TOKEN_LIFETIME - token ishlash muddati</li>
<li>REFRESH_TOKEN_LIFETIME - token islash muddati tugaganda yangilash uchun token muddati</li>
</ul>
<p>Ishga tushiramiz, so'ng Postmanda tekshiramiz.</p>
<p><img alt="" src="../images/auth/img_11.png" /></p>
<p>Endi /api/project_viewset/ APIga qaytamiz, bu API da biz parol login emas, hozirgina qo'lga kiritan tokenni kiritamiz:</p>
<p><img alt="" src="../images/auth/img_11.png" /></p>
<p>Eslatma Tokendan oldin Bearer so'zini qo'shib ketamiz.</p>
<h3 id="24-login-logout-register">2.4 Login, logout, register<a class="headerlink" href="#24-login-logout-register" title="Permanent link">&para;</a></h3>
<p>Qadam - 1</p>
<p><b>settings.py</b></p>

<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>


<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rest_framework.authtoken&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django_filters&#39;</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
<span class="c1"># ...</span>

<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>

    <span class="s1">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.permissions.AllowAny&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.authentication.TokenAuthentication&#39;</span><span class="p">,</span>  <span class="c1"># &lt;-- And here</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; python manage.py makemigrations
</code></pre></div>
<p>Qadam - 2</p>
<p><b>users/urls.py</b></p>

<div class="highlight"><pre><span></span><code><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;login/&#39;</span><span class="p">,</span> <span class="n">login_user</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;logout/&#39;</span><span class="p">,</span> <span class="n">logout_user</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;register/&#39;</span><span class="p">,</span> <span class="n">register_user</span><span class="p">)</span>
<span class="p">]</span>
</code></pre></div>
<p>Qadam - 3</p>
<p><b>users/views.py</b></p>

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">authenticate</span><span class="p">,</span> <span class="n">login</span><span class="p">,</span> <span class="n">logout</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">status</span>
<span class="kn">from</span> <span class="nn">rest_framework.authtoken.models</span> <span class="kn">import</span> <span class="n">Token</span>
<span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">api_view</span>
<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>


<span class="c1"># ...</span>

<span class="nd">@api_view</span><span class="p">([</span><span class="s2">&quot;GET&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">logout_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">auth_token</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;User Logged out successfully&#39;</span><span class="p">)</span>


<span class="nd">@api_view</span><span class="p">([</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">login</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">login</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Login talab etiladi&#39;</span>
        <span class="p">})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Parol talab etiladi&#39;</span>
        <span class="p">})</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;bunday foydalanuvchi bazada yo&#39;&#39;q&#39;</span>
        <span class="p">})</span>

    <span class="n">token</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">key</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">token</span>
        <span class="p">}</span>
    <span class="p">)</span>


<span class="nd">@api_view</span><span class="p">([</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">register_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>

    <span class="n">login</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">login</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Login talab etiladi&#39;</span>
        <span class="p">})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Parol talab etiladi&#39;</span>
        <span class="p">})</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Bu foydalanuvchi bor&#39;</span>
        <span class="p">})</span>


    <span class="k">try</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="n">login</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Foydalanuvchi yaratishda xatolik yuz berdi&#39;</span>
        <span class="p">})</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">key</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Foydalanuvchi qo&#39;&#39;shildi&#39;</span><span class="p">,</span>
        <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
        <span class="s2">&quot;is_admin&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">is_staff</span>
    <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span><span class="p">)</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 PayTechUz
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://t.me/+7Gn-JZ99TfgwZDNi" target="_blank" rel="noopener" title="Telegram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/hoosnick/rest-api-framework-book" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Buferga nusxalandi", "clipboard.copy": "Buferga nusxalash", "search.result.more.one": "Ushbu sahifada yana 1 ta natija", "search.result.more.other": "Bu sahifada yana # ta natija", "search.result.none": "Mos natijalar yo\u0027q", "search.result.one": "1 ta mos natija", "search.result.other": "# ta mos keladigan natijalar", "search.result.placeholder": "Qidiruvni boshlash uchun kiriting", "search.result.term.missing": "To\u0027ldirilmagan", "select.version": "Versiyani tanlang"}}</script>
    
    
      <script src="../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>